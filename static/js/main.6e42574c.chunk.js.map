{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeleteCardPopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","src","logo","alt","profileContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","item","cardLikeButtonClassName","onClick","aria-label","type","name","link","length","Main","onEditProfile","onAddPlace","onEditAvatar","cardsContext","useState","pageNumber","setPageNumber","pageVisited","displayUsers","slice","map","pageCount","Math","ceil","avatar","about","previousLabel","nextLabel","onPageChange","selected","containerClassName","previousLinkClassName","nextLinkClassName","disabledClassName","activeClassName","Footer","ImagePopup","isOpen","onClose","closeOver","useEffect","closeESC","evt","key","document","addEventListener","removeEventListener","api","address","token","this","_address","_token","fetch","headers","authorization","then","res","ok","json","Promise","reject","status","method","body","JSON","stringify","PopupWithForm","handleSubmit","nameForm","children","title","onSubmit","action","id","noValidate","EditProfilePopup","onUpdateUser","loading","setName","description","setDescription","load","useRef","e","preventDefault","onChange","target","value","placeholder","minLength","maxLength","required","ref","disabled","EditAvatarPopup","onUpdateAvatar","inputEl","current","AddPlacePopup","nameCurrent","linkCurrent","DeleteCardPopup","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isPhotoPopupOpen","setIsPhotoPopupOpen","selectedCard","setSelectedCard","setCurrentUser","cards","setCards","loadingCard","setLoadingCard","loadingProfile","setLoadingProfile","loadingAvatar","setLoadingAvatar","loadingDelete","setLoadingDelete","delPopup","setDelPopup","cardToDelete","setCardToDelete","closeAllPopup","escClose","event","classList","contains","all","getInitialProfile","getInitialCards","usersData","catch","err","console","log","Provider","deleteLike","addLike","newCard","newCards","pathEditProfile","finally","addAvatar","postAddCard","deleteAddCard","delcard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6e42574c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import React from 'react';\r\nimport logo from './../images/logo.svg';\r\n\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header line\">\r\n      <img src={logo} alt=\"логотип\" className=\"header__logo\" />\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header","import React from \"react\";\r\n\r\nexport const profileContext = React.createContext();\r\n","import React from \"react\";\r\nimport { profileContext } from \"./../contexts/CurrentUserContext\";\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = React.useContext(profileContext);\r\n\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = `button button_type_delete ${isOwn ? \"button_type_delete\" : \"button_type_delete-hidden\"\r\n    }`;\r\n\r\n  const isLiked = card.likes.some((item) => item._id === currentUser._id);\r\n  const cardLikeButtonClassName = `button button_type_like ${isLiked ? \"button_type_like_active\" : \"button_type_like\"\r\n    }`;\r\n\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <article className=\"element\">\r\n      <button\r\n        onClick={handleDeleteClick}\r\n        aria-label=\"Удалить\"\r\n        className={cardDeleteButtonClassName}\r\n        type=\"button\"\r\n      ></button>\r\n      <button onClick={handleClick} className=\"button button_type_photo\">\r\n        <img className=\"element__photo\" alt={card.name} src={card.link} />\r\n      </button>\r\n      <div className=\"element__position\">\r\n        <h3 className=\"element__subtitle\">{card.name}</h3>\r\n        <div>\r\n          <button\r\n            onClick={handleLikeClick}\r\n            aria-label=\"Поставить_лайк\"\r\n            className={cardLikeButtonClassName}\r\n            type=\"button\"\r\n          ></button>\r\n          <div className=\"element__counter_like\">{card.likes.length}</div>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React, { useState } from \"react\";\r\nimport Card from \"./Card.js\";\r\nimport { profileContext } from \"./../contexts/CurrentUserContext\";\r\nimport ReactPaginate from 'react-paginate';\r\n\r\nfunction Main({\r\n  onCardClick,\r\n  onCardLike,\r\n  onCardDelete,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  cardsContext\r\n}) {\r\n  const currentUser = React.useContext(profileContext);\r\n  const [pageNumber, setPageNumber] = useState(0)\r\n\r\n  const usersPerPage = 6\r\n  const pageVisited = pageNumber * usersPerPage\r\n\r\n  const displayUsers = cardsContext.slice(pageVisited, pageVisited + usersPerPage).map((item) => {\r\n    return (\r\n      <Card\r\n        card={item}\r\n        onCardClick={onCardClick}\r\n        key={item._id}\r\n        onCardLike={onCardLike}\r\n        onCardDelete={onCardDelete}\r\n      />\r\n    );\r\n  });\r\n\r\n  const pageCount = Math.ceil(cardsContext.length / usersPerPage)\r\n  const changePage = ({selected}) => {\r\n    setPageNumber(selected)\r\n  }\r\n\r\n  return (\r\n    <div className=\"conteiner\">\r\n      <main className=\"main\">\r\n        <section className=\"profile\">\r\n          <div onClick={onEditAvatar} className=\"profile__avatar-container\">\r\n            <img\r\n              src={currentUser.avatar}\r\n              alt={currentUser.name}\r\n              className=\"profile__avatar\"\r\n            />\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__edit\">\r\n              <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n              <button\r\n                onClick={onEditProfile}\r\n                aria-label=\"Редактировать_профиль\"\r\n                className=\"button button_type_edit\"\r\n                type=\"button\"\r\n              ></button>\r\n            </div>\r\n            <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n          </div>\r\n          <button\r\n            onClick={onAddPlace}\r\n            aria-label=\"Добавить_фото\"\r\n            className=\"button button_type_add-card\"\r\n            type=\"button\"\r\n          ></button>\r\n        </section>\r\n        <section className=\"elements\">\r\n          <div className=\"elements__content\">\r\n            {displayUsers}\r\n            \r\n          </div>\r\n          <ReactPaginate \r\n            previousLabel={\"Назад\"}\r\n            nextLabel={\"Вперед\"}\r\n            pageCount={pageCount}\r\n            onPageChange={changePage}\r\n            containerClassName={\"paginationsBttn\"}\r\n            previousLinkClassName={\"previousBttn\"}\r\n            nextLinkClassName={\"nextBttn\"}\r\n            disabledClassName={\"paginationDisables\"}\r\n            activeClassName={\"paginationActive\"}\r\n           />\r\n        </section>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\nfunction Footer() {\r\n    return (\r\n        <div className=\"conteiner\">\r\n            <footer className=\"footer\">\r\n                <p className=\"footer__subtitle\">© 2020 Mesto Russia</p>\r\n            </footer>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer","import React from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\nfunction ImagePopup({ isOpen, onClose, closeOver, card }) {\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const closeESC = (evt) => {\r\n      if (evt.key === \"Escape\") {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", closeESC);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", closeESC);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  return (\r\n    <div\r\n      className={`popup popup_type_photo ${isOpen && \"popup_opened\"}`}\r\n      onClick={closeOver}\r\n    >\r\n      <figure className=\"popup__big\">\r\n        <button\r\n          onClick={onClose}\r\n          aria-label=\"Закрыть_попап\"\r\n          className=\"button button_type_close button_type_big-close\"\r\n          type=\"button\"\r\n        ></button>\r\n        <img className=\"popup__big-photo\" alt=\"Фото\" src={`${card.link}`} />\r\n        <figcaption className=\"popup__big-title\">{`${card.name}`}</figcaption>\r\n      </figure>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n"," class Api {\r\n  constructor({ address, token }) {\r\n    this._address = address\r\n    this._token = token\r\n  }\r\n\r\n  // выгрузить карточки с сервера\r\n  getInitialCards() {\r\n    return fetch(`${this._address}/cards`, {\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //Выгрузить данные профиля с сервера\r\n  getInitialProfile() {\r\n    return fetch(`${this._address}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //Редактирование данных профиля\r\n  pathEditProfile(item) {\r\n    return fetch(`${this._address}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: item.name,\r\n        about: item.about\r\n      })\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //добавить карточку\r\n  postAddCard(item) {\r\n    return fetch(`${this._address}/cards`, {\r\n      method: 'POST',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: item.name,\r\n        link: item.link\r\n      })\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //Удалить карточку\r\n  deleteAddCard(item) {\r\n    return fetch(`${this._address}/cards/${item}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  //Обновление аватара\r\n  addAvatar(item) {\r\n    return fetch(`${this._address}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        avatar: item.avatar\r\n      })\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  addLike(item) {\r\n    return fetch(`${this._address}/cards/likes/${item}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        authorization: this._token,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n\r\n  deleteLike(item) {\r\n    return fetch(`${this._address}/cards/likes/${item}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        authorization: this._token\r\n      }\r\n    })\r\n      .then(res => res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`))\r\n  }\r\n}\r\n\r\nconst config = {\r\n  address:'https://mesto.nomoreparties.co/v1/cohort-19',\r\n  token:'175e5d69-964d-4046-a547-a053671ab7db'\r\n}\r\n\r\nconst api = new Api (config);\r\n\r\nexport default api;\r\n","import React, { useEffect } from \"react\";\r\n\r\nfunction PopupWithForm({\r\n  isOpen,\r\n  onClose,\r\n  name,\r\n  closeOver,\r\n  handleSubmit,\r\n  nameForm,\r\n  children,\r\n  title\r\n}) {\r\n  useEffect(() => {\r\n    if (!isOpen) return null;\r\n    const closeESC = (evt) => {\r\n      if (evt.key === \"Escape\") {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", closeESC);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", closeESC);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  return (\r\n    <div\r\n      className={`popup popup_type_${name} ${isOpen && \"popup_opened\"}`}\r\n      onClick={closeOver}\r\n    >\r\n      <div className=\"popup__conteiner\">\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          action=\"#\"\r\n          id=\"form_reset\"\r\n          className={`form form_type_${nameForm}`}\r\n          name={`popup-${name}`}\r\n          noValidate\r\n        >\r\n          <h2 className=\"popup__title\">{title}</h2>\r\n          {children}\r\n        </form>\r\n        <button\r\n          onClick={onClose}\r\n          aria-label=\"Закрыть_попап\"\r\n          className=\"button button_type_close\"\r\n          type=\"button\"\r\n        ></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\nimport { profileContext } from \"./../contexts/CurrentUserContext\";\r\n\r\nfunction EditProfilePopup({\r\n  isOpen,\r\n  onClose,\r\n  closeOver,\r\n  onUpdateUser,\r\n  loading\r\n}) {\r\n  const currentUser = React.useContext(profileContext);\r\n  const [name, setName] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const load = useRef(null);\r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function hendleDescriptionChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({\r\n      name,\r\n      about: description\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      closeOver={closeOver}\r\n      handleSubmit={handleSubmit}\r\n      name=\"edit\"\r\n      title=\"Редактировать профиль\"\r\n      nameForm=\"edit\"\r\n    >\r\n      <input\r\n        onChange={handleNameChange}\r\n        value={name}\r\n        id=\"text-input\"\r\n        className=\"popup__data popup__data_type_name\"\r\n        type=\"text\"\r\n        placeholder=\"Имя\"\r\n        name=\"name\"\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        required\r\n      />\r\n      <span id=\"text-input-error\" className=\"popup__data-error\"></span>\r\n      <input\r\n        onChange={hendleDescriptionChange}\r\n        value={description}\r\n        id=\"subtext-input\"\r\n        className=\"popup__data popup__data_type_job\"\r\n        type=\"text\"\r\n        placeholder=\"Вид деятельности\"\r\n        name=\"profession\"\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        required\r\n      />\r\n      <span id=\"subtext-input-error\" className=\"popup__data-error\"></span>\r\n      <button\r\n        ref={load}\r\n        className={`button button_type_save button_type_save-edit ${\r\n          loading ? \"button_type_disabled\" : \"button_type_save\"\r\n        }`}\r\n        type=\"submit\"\r\n        name=\"button\"\r\n        value=\"Сохранить\"\r\n        disabled={loading ? true : false}\r\n      >\r\n        {loading ? \"Сохранение...\" : \"Сохранить\"}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction EditAvatarPopup({\r\n  isOpen,\r\n  onClose,\r\n  closeOver,\r\n  name,\r\n  title,\r\n  onUpdateAvatar,\r\n  loading\r\n}) {\r\n  const inputEl = useRef(null);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: inputEl.current.value\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      inputEl.current.value = \"\";\r\n    }\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      closeOver={closeOver}\r\n      name={name}\r\n      title={title}\r\n      handleSubmit={handleSubmit}\r\n      nameForm=\"avatar\"\r\n    >\r\n      <input\r\n        ref={inputEl}\r\n        id=\"avatar-input\"\r\n        className=\"popup__data popup__data_photo\"\r\n        type=\"url\"\r\n        name=\"photoAvatar\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n      />\r\n      <span id=\"avatar-input-error\" className=\"popup__data-error\"></span>\r\n      <button\r\n        className={`button button_type_save button_type_save-profile ${\r\n          loading ? \"button_type_disabled\" : \"button_type_save\"\r\n        }`}\r\n        type=\"submit\"\r\n        name=\"button\"\r\n        value=\"Сохранить\"\r\n        disabled={loading ? true : false}\r\n      >\r\n        {loading ? \"Сохранение...\" : \"Сохранить\"}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import { React, useEffect, useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\n\r\nfunction AddPlacePopup({\r\n  isOpen,\r\n  onClose,\r\n  closeOver,\r\n  name,\r\n  title,\r\n  onAddPlace,\r\n  loading\r\n}) {\r\n  const nameCurrent = useRef();\r\n  const linkCurrent = useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace({\r\n      name: nameCurrent.current.value,\r\n      link: linkCurrent.current.value\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      nameCurrent.current.value = \"\";\r\n      linkCurrent.current.value = \"\";\r\n    }\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      closeOver={closeOver}\r\n      name={name}\r\n      title={title}\r\n      handleSubmit={handleSubmit}\r\n      nameForm=\"photo\"\r\n    >\r\n      <input\r\n        ref={nameCurrent}\r\n        id=\"photo-input\"\r\n        className=\"popup__data popup__data_photo popup__data_type_location\"\r\n        type=\"text\"\r\n        name=\"point\"\r\n        placeholder=\"Название\"\r\n        minLength=\"2\"\r\n        maxLength=\"30\"\r\n        required\r\n      />\r\n      <span id=\"photo-input-error\" className=\"popup__data-error\"></span>\r\n      <input\r\n        ref={linkCurrent}\r\n        id=\"url-input\"\r\n        className=\"popup__data popup__data_photo popup__data_type_link\"\r\n        type=\"url\"\r\n        name=\"photo\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n      />\r\n      <span id=\"url-input-error\" className=\"popup__data-error\"></span>\r\n      <button\r\n        className={`button button_type_save button_type_save-add ${\r\n          loading ? \"button_type_disabled\" : \"button_type_save\"\r\n        }`}\r\n        type=\"submit\"\r\n        name=\"button\"\r\n        value=\"Создать\"\r\n        disabled={loading ? true : false}\r\n      >\r\n        {loading ? \"Сохранение...\" : \"Создать\"}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm.js\";\r\nfunction DeleteCardPopup({\r\n  isOpen,\r\n  onCardDelete,\r\n  onClose,\r\n  name,\r\n  closeOver,\r\n  loading\r\n}) {\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onCardDelete();\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      handleSubmit={handleSubmit}\r\n      onClose={onClose}\r\n      name={name}\r\n      closeOver={closeOver}\r\n      nameForm=\"delete\"\r\n    >\r\n      <h2 className=\"popup__title popup__title_type_photo\">Вы уверены ?</h2>\r\n      <button\r\n        className={`button button_type_save ${\r\n          loading ? \"button_type_disabled\" : \"button_type_save\"\r\n        }`}\r\n        type=\"submit\"\r\n        name=\"button\"\r\n        value=\"yes\"\r\n        disabled={loading ? true : false}\r\n      >\r\n        {loading ? \"Удаление...\" : \"Да\"}\r\n      </button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default DeleteCardPopup;\r\n","import React from \"react\";\r\nimport Header from \"./Header\";\r\nimport Main from \"./Main\";\r\nimport Footer from \"./Footer\";\r\nimport ImagePopup from \"./ImagePopup\";\r\nimport { useEffect, useState } from \"react\";\r\nimport api from \"../utils/api\";\r\nimport { profileContext } from \"./../contexts/CurrentUserContext\";\r\nimport EditProfilePopup from \"./EditProfilePopup\";\r\nimport EditAvatarPopup from \"./EditAvatarPopup\";\r\nimport AddPlacePopup from \"./AddPlacePopup\";\r\nimport DeleteCardPopup from \"./DeleteCardPopup\";\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isPhotoPopupOpen, setIsPhotoPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [loadingCard, setLoadingCard] = useState(false);\r\n  const [loadingProfile, setLoadingProfile] = useState(false)\r\n  const [loadingAvatar, setLoadingAvatar] = useState(false)\r\n  const [loadingDelete, setLoadingDelete] = useState(false)\r\n  const [delPopup, setDelPopup] = useState(false);\r\n  const [cardToDelete, setCardToDelete] = useState({});\r\n  \r\n  useEffect(() => {\r\n    Promise.all([api.getInitialProfile(), api.getInitialCards()])\r\n      .then(([usersData, cards]) => {\r\n        setCurrentUser(usersData);\r\n        setCards(cards);\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      });\r\n  }, []);\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((item) => item._id === currentUser._id);\r\n    const likeRequest = isLiked ? api.deleteLike(card._id) : api.addLike(card._id)\r\n    likeRequest.then((newCard) => {\r\n      const newCards = cards.map((item) =>\r\n        item._id === card._id ? newCard : item\r\n      )\r\n      setCards(newCards);\r\n    })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`)\r\n      })\r\n  }\r\n\r\n  function hendleDeleteCard(card) {\r\n    setCardToDelete(card);\r\n    setDelPopup(true);\r\n  }\r\n\r\n  function handleCardDeleteSubmit() {\r\n    setLoadingDelete(true)\r\n    api\r\n      .deleteAddCard(cardToDelete._id)\r\n      .then(() => {\r\n        const delcard = cards.filter((item) => item._id !== cardToDelete._id);\r\n        setCards(delcard);\r\n        closeAllPopup();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      })\r\n      .finally(() => {\r\n        setCardToDelete({});\r\n        setLoadingDelete(false)\r\n      });\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setIsPhotoPopupOpen(true);\r\n    setSelectedCard(card);\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function closeAllPopup() {\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsPhotoPopupOpen(false);\r\n    setDelPopup(false);\r\n  }\r\n\r\n  function escClose(event) {\r\n    if (event.target.classList.contains(\"popup_opened\")) {\r\n      closeAllPopup();\r\n    }\r\n  }\r\n\r\n  function handleUpdateUser({ name, about }) {\r\n    setLoadingProfile(true);\r\n    api\r\n      .pathEditProfile({ name: name, about: about })\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopup();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      })\r\n      .finally(() => setLoadingProfile(false));\r\n  }\r\n\r\n  function handleUpdateAvatar({ avatar }) {\r\n    setLoadingAvatar(true);\r\n    api\r\n      .addAvatar({ avatar: avatar })\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopup();\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      })\r\n      .finally(() => setLoadingAvatar(false));\r\n  }\r\n\r\n  function handleAddPlaceSubmit({ name, link}) {\r\n    setLoadingCard(true);\r\n    api\r\n      .postAddCard({ name: name, link: link })\r\n      .then((res) => {\r\n        setCards([res, ...cards]);\r\n        if (res) {\r\n         closeAllPopup()\r\n        }\r\n\r\n      })\r\n      .catch((err) => {\r\n        console.log(`Ошибка: ${err}`);\r\n      })\r\n      .finally(() => setLoadingCard(false));\r\n  }\r\n \r\n  return (\r\n    <div className=\"page\">\r\n      <profileContext.Provider value={currentUser}>\r\n        <Header />\r\n          <Main\r\n              onEditProfile={handleEditProfileClick}\r\n              onAddPlace={handleAddPlaceClick}\r\n              onEditAvatar={handleEditAvatarClick}\r\n              onCardClick={handleCardClick}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={hendleDeleteCard}\r\n              cardsContext={cards}\r\n            />\r\n            <Footer />\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          onClose={closeAllPopup}\r\n          closeOver={escClose}\r\n          onUpdateUser={handleUpdateUser}\r\n          loading={loadingProfile}\r\n        />\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          onClose={closeAllPopup}\r\n          closeOver={escClose}\r\n          name=\"avatar\"\r\n          title=\"Обновить аватар\"\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n          loading={loadingAvatar}\r\n        />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          onClose={closeAllPopup}\r\n          closeOver={escClose}\r\n          name=\"photo\"\r\n          title=\"Новое место\"\r\n          onAddPlace={handleAddPlaceSubmit}\r\n          loading={loadingCard}\r\n        />\r\n        <ImagePopup\r\n          card={selectedCard}\r\n          onClose={closeAllPopup}\r\n          isOpen={isPhotoPopupOpen}\r\n          closeOver={escClose}\r\n        />\r\n        <DeleteCardPopup\r\n          isOpen={delPopup}\r\n          name=\"delete\"\r\n          card={selectedCard}\r\n          onCardDelete={handleCardDeleteSubmit}\r\n          onClose={closeAllPopup}\r\n          closeOver={escClose}\r\n          loading={loadingDelete}\r\n        />\r\n      </profileContext.Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App.js';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport{BrowserRouter} from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}